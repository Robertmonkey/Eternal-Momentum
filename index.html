<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Eternal Momentum</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0, user-scalable=no"/>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div id="loading-screen">
      <div id="loading-progress-container">
          <div id="loading-progress-fill"></div>
      </div>
      <p id="loading-status-text">Initializing Systems...</p>
  </div>

  <div id="home-screen" style="display: none;">
    <video autoplay muted loop playsinline id="home-video-bg" preload="none">
      <source src="./assets/home.mp4" type="video/mp4">
    </video>
    <div id="home-overlay">
      <h1 id="game-title">ETERNAL MOMENTUM</h1>
      <div id="home-actions">
        <button id="new-game-btn" class="home-btn" style="display: none;">AWAKEN</button>
        <button id="continue-game-btn" class="home-btn" style="display: none;">CONTINUE MOMENTUM</button>
        <button id="erase-game-btn" class="home-btn erase" style="display: none;">SEVER TIMELINE</button>
      </div>
    </div>
  </div>

  <canvas id="gameCanvas"></canvas>
  <div id="vignette"></div>
  <div id="unlock-notification"></div>

  <div id="gameOverMenu" class="modal-background">
      <h1>TIMELINE COLLAPSED</h1>
      <div id="gameOverActions">
          <button id="restartStageBtn">Restart Stage</button>
          <button id="aberrationMenuBtn">Aberration Cores</button> <button id="ascensionMenuBtn">Ascension Conduit</button>
          <button id="levelSelectMenuBtn">Stage Select</button>
      </div>
  </div>

  <div id="custom-confirm">
      <div id="custom-confirm-box" class="modal-background">
          <h2 id="custom-confirm-title"></h2>
          <p id="custom-confirm-text"></p>
          <div id="custom-confirm-actions">
              <button id="confirm-yes">Confirm</button>
              <button id="confirm-no" class="btn-modal-close">Cancel</button>
          </div>
      </div>
  </div>

  <div id="ui-container">
    <div id="status-effects-bar"></div>
    <div class="command-bar">
        <div class="ui-pod left-pod">
            <div id="ascension-bar-container">
                <div id="ascension-bar-fill"></div>
                <div id="ascension-bar-text">LVL 1</div>
            </div>
            <div id="ascension-points-display">AP: 0</div>
        </div>

        <div id="health-bar-container">
            <div id="shield-bar-overlay"></div>
            <div id="health-bar-value" class="health-high"></div>
            <div id="health-bar-text">100 / 100</div>
            <div id="health-bar-sheen"></div>
        </div>

        <div class="core-display">
            <div id="aberration-core-socket" data-tooltip-text="No Core Attuned">
                <div id="aberration-core-icon">‚óé</div>
            </div>
            <div class="ability-cluster">
                <div class="ability-queue defensive">
                    <div class="queue-slot" id="q-def-1"></div>
                    <div class="queue-slot" id="q-def-2"></div>
                </div>
                <div class="abilities">
                    <div class="ability-slot" id="slot-def-0" data-tooltip-text="Defensive Power (Right-Click)"></div>
                    <div class="ability-slot main" id="slot-off-0" data-tooltip-text="Offensive Power (Left-Click)"></div>
                </div>
                <div class="ability-queue offensive">
                    <div class="queue-slot" id="q-off-1"></div>
                    <div class="queue-slot" id="q-off-2"></div>
                </div>
            </div>
        </div>

        <div class="ui-pod right-pod">
            <button id="ascensionBtn" title="Ascension Conduit">üí†</button>
            <button id="levelSelectBtn" title="Stage Select">üó∫Ô∏è</button>
            <button id="soundToggle">üîä</button>
        </div>
    </div>
  </div>
  
  <div id="bossBanner"></div>
  <div id="bossHpContainer"></div>

  <div id="levelSelectModal">
    <div id="modal-content" class="modal-background">
        <button id="loreCodexBtn" class="top-right-btn">LORE CODEX</button>
        <h2 class="modal-title">SELECT STAGE</h2>
        <div id="level-select-list-container">
            <div id="level-select-list">
                </div>
        </div>
        <div id="modal-actions">
            <button id="arenaBtn">WEAVER'S ORRERY</button>
            <button id="jumpToFrontierBtn">JUMP TO FRONTIER</button>
            <button id="closeLevelSelectBtn" class="btn-modal-close">Close</button>
        </div>
    </div>
  </div>
  
  <div id="ascensionGridModal">
    <div id="ascension-grid-container" class="modal-background">
        <div class="ascension-header">
            <h1>ASCENSION CONDUIT</h1>
            <div class="ap-display-header">
                <span>ASCENSION POINTS</span>
                <span id="ap-total-asc-grid">0</span>
            </div>
        </div>
        <div class="ascension-content">
        </div>
        <div class="ascension-footer">
            <button id="clearSaveBtn">ERASE TIMELINE</button>
            <button id="closeAscensionBtn" class="btn-modal-close">CLOSE</button>
        </div>
    </div>
  </div>
  
  <div id="aberrationCoreModal">
      <div id="aberration-core-container" class="modal-background">
          <div class="ascension-header">
              <h1>ABERRATION CORE ATTUNEMENT</h1>
              <div id="aberration-core-equipped-display">
                  <span>CURRENTLY ATTUNED</span>
                  <span id="aberration-core-equipped-name">None</span>
              </div>
          </div>
          <div id="aberration-core-list-container">
          </div>
          <div class="ascension-footer">
              <button id="unequipCoreBtn">UNEQUIP CORE</button>
              <button id="closeAberrationCoreBtn" class="btn-modal-close">CLOSE</button>
          </div>
      </div>
  </div>

  <div id="orreryModal">
    <div id="orrery-modal-content" class="modal-background">
        <div class="ascension-header">
            <h1>THE WEAVER'S ORRERY</h1>
            <div class="ap-display-header">
                <span>ECHOES OF CREATION</span>
                <span id="orrery-points-total">0</span>
            </div>
        </div>
        <div id="orrery-main-content">
            <div id="orrery-boss-list-container">
            </div>
            <div id="orrery-selection-container">
                <h3>TIMELINE ROSTER</h3>
                <div id="orrery-selection-display">
                </div>
                <div id="orrery-cost-display">
                    <span>ECHOES SPENT: </span>
                    <span id="orrery-current-cost">0</span>
                </div>
            </div>
        </div>
        <div class="ascension-footer">
            <button id="orrery-reset-btn">CLEAR ROSTER</button>
            <div style="display: flex; gap: 15px;">
                <button id="orrery-start-btn" class="disabled">FORGE TIMELINE</button>
                <button id="closeOrreryBtn" class="btn-modal-close">CLOSE</button>
            </div>
        </div>
    </div>
  </div>
  
  <div id="bossInfoModal">
      <div id="bossInfoModalBox" class="modal-background">
          <h2 id="bossInfoModalTitle"></h2>
          <div id="bossInfoModalContent"></div>
          <div id="bossInfoModalActions">
              <button id="closeBossInfoModalBtn" class="btn-modal-close">Close</button>
          </div>
      </div>
  </div>

  <audio id="annihilatorBeamSound" src="./assets/annihilatorBeamSound.mp3" preload="none"></audio>
  <audio id="architectBuild" src="./assets/architectBuild.mp3" preload="none"></audio>
  <script type="module" src="./main.js"></script>
</body>
</html>
